/**
 * ルールベースのジャンル自動分類
 * キーワードを事前定義のカテゴリ辞書で分類する
 */

export type Genre =
    | "食べ物"
    | "観光"
    | "歴史"
    | "地名"
    | "文化"
    | "産業"
    | "その他";

const GENRE_KEYWORDS: Record<Genre, string[]> = {
    食べ物: [
        "ラーメン", "うどん", "焼きうどん", "カレー", "寿司", "刺身", "天ぷら",
        "焼肉", "もつ鍋", "餃子", "たこ焼き", "お好み焼き", "パン", "ケーキ",
        "チョコ", "飴", "せんべい", "味噌", "醤油", "酢", "砂糖", "塩",
        "米", "パスタ", "ピザ", "ハンバーガー", "サンドイッチ", "弁当",
        "おにぎり", "丼", "そば", "鍋", "焼き鳥", "串", "唐揚げ",
        "コーヒー", "お茶", "ビール", "酒", "ワイン", "ジュース",
        "果物", "野菜", "肉", "魚", "海鮮", "スイーツ", "デザート",
        "料理", "グルメ", "食", "味", "レストラン", "居酒屋", "カフェ",
        "バナナ", "りんご", "みかん", "いちご", "チーズ", "バター",
        "豆腐", "納豆", "梅干し", "漬物", "おでん", "しゃぶしゃぶ",
        "すき焼き", "鉄板焼き", "かき氷", "アイス", "プリン",
    ],
    観光: [
        "観光", "旅行", "ホテル", "温泉", "神社", "寺", "城", "公園",
        "海", "山", "川", "橋", "タワー", "展望", "夜景", "花火",
        "祭り", "イベント", "フェス", "ライブ", "コンサート",
        "水族館", "動物園", "遊園地", "テーマパーク", "博物館", "美術館",
        "ビーチ", "島", "港", "船", "クルーズ", "ドライブ", "散歩",
        "写真", "インスタ", "映え", "スポット", "名所", "絶景",
    ],
    歴史: [
        "歴史", "戦国", "幕末", "明治", "大正", "昭和", "平成", "令和",
        "武士", "侍", "将軍", "殿様", "城主", "藩", "幕府",
        "戦争", "戦い", "合戦", "革命", "維新", "開国",
        "遺跡", "古墳", "文化財", "世界遺産", "国宝", "重要文化財",
        "伝統", "伝説", "神話", "昔話", "古代", "中世", "近代",
        "炭鉱", "製鉄", "八幡製鐵所", "筑豊",
    ],
    地名: [
        "小倉", "門司", "門司港", "八幡", "若松", "戸畑",
        "北九州", "関門", "関門海峡", "下関", "福岡", "博多",
        "九州", "本州", "山口", "大分", "佐賀", "長崎", "熊本",
        "東京", "大阪", "京都", "名古屋", "横浜", "神戸", "札幌",
        "沖縄", "北海道", "仙台", "広島", "アメリカ", "中国", "韓国",
        "ヨーロッパ", "アジア", "アフリカ",
    ],
    文化: [
        "漫画", "アニメ", "映画", "ドラマ", "音楽", "バンド", "歌",
        "芸術", "アート", "陶芸", "工芸", "書道", "茶道", "華道",
        "スポーツ", "野球", "サッカー", "バスケ", "相撲", "柔道",
        "ゲーム", "将棋", "囲碁", "麻雀", "カード",
        "ファッション", "着物", "和服", "おしゃれ",
        "本", "小説", "詩", "文学", "哲学", "宗教",
        "学校", "大学", "教育", "勉強", "試験",
        "祭", "盆踊り", "花見", "正月", "クリスマス", "バレンタイン",
        "銀河鉄道999", "松本零士", "宇宙海賊",
    ],
    産業: [
        "工場", "製造", "製鉄", "鉄鋼", "自動車", "ロボット", "技術",
        "IT", "プログラミング", "AI", "コンピュータ", "インターネット",
        "建設", "建築", "不動産", "ビル", "マンション",
        "銀行", "金融", "経済", "株", "投資", "ビジネス", "会社",
        "農業", "漁業", "林業", "鉱業",
        "電気", "エネルギー", "環境", "エコ", "リサイクル",
        "医療", "病院", "薬", "科学", "研究",
        "TOTO", "安川電機", "ゼンリン",
    ],
    その他: [],
};

/**
 * キーワードからジャンルを推定する
 */
export function classifyGenre(keyword: string): Genre {
    const normalized = keyword.toLowerCase().trim();

    for (const [genre, keywords] of Object.entries(GENRE_KEYWORDS)) {
        if (genre === "その他") continue;
        for (const kw of keywords) {
            if (normalized.includes(kw.toLowerCase())) {
                return genre as Genre;
            }
        }
    }

    return "その他";
}
